<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAZIS P2P Marketplace</title>
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel для JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #40a7e3;
            --secondary-color: #8774e1;
            --background-color: #ffffff;
            --surface-color: #f8f9fa;
            --error-color: #d63939;
            --success-color: #48bb78;
            --text-primary: #1a202c;
            --text-secondary: #718096;
            --border-color: #e2e8f0;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --background-color: #1a202c;
                --surface-color: #2d3748;
                --text-primary: #f7fafc;
                --text-secondary: #cbd5e0;
                --border-color: #4a5568;
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition);
        }

        .app-container {
            max-width: 100%;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 16px;
            border-radius: 0 0 16px 16px;
            box-shadow: var(--card-shadow);
            margin-bottom: 16px;
        }

        .price-banner {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .price-banner h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .price-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        /* Transaction List */
        .transaction-list {
            padding: 0 16px;
        }

        .transaction-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .tab-button {
            flex: 1;
            padding: 12px;
            background-color: var(--surface-color);
            border: none;
            border-radius: 12px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }

        .transaction-item {
            background-color: var(--surface-color);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .transaction-item:active {
            transform: scale(0.98);
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
            font-weight: 600;
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-amount {
            font-weight: 600;
        }

        .transaction-rate {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--surface-color);
            display: flex;
            justify-content: space-around;
            padding: 12px;
            border-top: 1px solid var(--border-color);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 0.75rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: flex-end;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: var(--background-color);
            border-radius: 20px 20px 0 0;
            padding: 24px;
            width: 100%;
            max-height: 90vh;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .input-field {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background-color: var(--surface-color);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(64, 167, 227, 0.2);
        }

        .conversion-rate {
            text-align: center;
            padding: 12px;
            background-color: var(--surface-color);
            border-radius: 12px;
            margin: 16px 0;
            font-size: 0.9rem;
        }

        .calculation-result {
            background-color: var(--surface-color);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
        }

        .calculation-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .calculation-total {
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border-color);
        }

        .action-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .action-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .action-button:active {
            transform: scale(0.98);
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            margin-top: 16px;
            font-size: 1.1rem;
        }

        /* Balance Section */
        .balance-section {
            padding: 16px;
        }

        .user-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 16px;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }

        .user-id {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .balance-amount {
            font-size: 2rem;
            font-weight: 700;
            margin: 8px 0;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .secondary-button {
            flex: 1;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .secondary-button:active {
            transform: scale(0.98);
        }

        /* Investment Section */
        .investment-card {
            background-color: var(--surface-color);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }

        .investment-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .investment-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
        }

        .investment-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .investment-rate {
            color: var(--success-color);
            font-weight: 600;
        }

        .investment-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .app-container {
                max-width: 400px;
                margin: 0 auto;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
                min-height: 100vh;
                position: relative;
            }
            
            .bottom-nav {
                max-width: 400px;
                margin: 0 auto;
                left: 50%;
                transform: translateX(-50%);
            }
            
            .modal-content {
                border-radius: 20px;
                max-width: 400px;
                margin: 0 auto;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, 100%);
                width: 90%;
            }
            
            .modal-overlay.active .modal-content {
                transform: translate(-50%, -50%);
            }
            
            .modal-overlay {
                align-items: center;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        .slide-up {
            animation: slideUp 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Глобальная переменная для хранения состояния приложения
        window.appState = {
            activeSection: 'main',
            activeTab: 'buy',
            buyModalOpen: false,
            sellModalOpen: false,
            isLoading: false,
            coinAmount: '',
            desiredRate: '',
            phoneNumber: '',
            selectedBank: '',
            transactionType: 'buy',
            buyRate: 0.80,
            sellRate: 0.70
        };

        // Функции для работы с состоянием
        function setAppState(newState) {
            window.appState = { ...window.appState, ...newState };
            renderApp();
        }

        // Имитация загрузки данных о курсах
        function startRatesUpdate() {
            if (window.ratesInterval) {
                clearInterval(window.ratesInterval);
            }
            
            window.ratesInterval = setInterval(() => {
                setAppState({
                    buyRate: Math.max(0.70, Math.min(0.90, (window.appState.buyRate + (Math.random() * 0.05 - 0.025))).toFixed(2)),
                    sellRate: Math.max(0.65, Math.min(0.85, (window.appState.sellRate + (Math.random() * 0.05 - 0.025))).toFixed(2))
                });
            }, 10000);
        }

        // Обработчик открытия модального окна
        function openModal(type) {
            setAppState({
                transactionType: type,
                buyModalOpen: type === 'buy',
                sellModalOpen: type === 'sell'
            });
        }

        // Обработчик закрытия модального окна
        function closeModal() {
            setAppState({
                buyModalOpen: false,
                sellModalOpen: false,
                coinAmount: '',
                desiredRate: '',
                phoneNumber: '',
                selectedBank: ''
            });
        }

        // Обработчик совершения сделки
        async function handleTransaction() {
            setAppState({ isLoading: true });
            
            // Имитация поиска совпадений
            try {
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // 70% шанс успешной сделки
                const isSuccess = Math.random() > 0.3;
                
                if (isSuccess) {
                    alert('Сделка успешно завершена!');
                    closeModal();
                } else {
                    alert('Не удалось найти подходящую сделку. Средства возвращены.');
                }
            } catch (error) {
                console.error('Transaction error:', error);
                alert('Произошла ошибка. Средства возвращены.');
            } finally {
                setAppState({ isLoading: false });
            }
        }

        // Расчет суммы в рублях
        function calculateRubles() {
            if (!window.appState.coinAmount || !window.appState.desiredRate) return 0;
            const amount = parseFloat(window.appState.coinAmount);
            const rate = parseFloat(window.appState.desiredRate);
            return (amount * rate).toFixed(2);
        }

        // Расчет суммы с комиссией
        function calculateWithFee() {
            const rubles = calculateRubles();
            if (!rubles) return 0;
            return (rubles * 0.95).toFixed(2);
        }

        // Компонент модального окна для транзакций
        function TransactionModal({ type, onClose }) {
            const banks = ['Сбербанк', 'Тинькофф', 'ВТБ', 'Альфа-Банк', 'Газпромбанк'];
            const state = window.appState;

            return React.createElement('div', {
                className: 'modal-overlay active',
                onClick: onClose
            }, React.createElement('div', {
                className: 'modal-content',
                onClick: e => e.stopPropagation()
            }, [
                React.createElement('div', { key: 'header', className: 'modal-header' }, [
                    React.createElement('h2', { key: 'title', className: 'modal-title' }, type === 'buy' ? 'Покупка CAZIS' : 'Продажа CAZIS'),
                    React.createElement('button', { 
                        key: 'close', 
                        className: 'close-button', 
                        onClick: onClose 
                    }, '×')
                ]),
                React.createElement('div', { key: 'amount', className: 'input-group' }, [
                    React.createElement('label', { key: 'label', className: 'input-label' }, 'Сумма в CAZIS'),
                    React.createElement('input', {
                        key: 'input',
                        type: 'number',
                        className: 'input-field',
                        placeholder: 'Введите количество',
                        value: state.coinAmount,
                        onChange: e => setAppState({ coinAmount: e.target.value })
                    })
                ]),
                React.createElement('div', { key: 'rate', className: 'input-group' }, [
                    React.createElement('label', { key: 'label', className: 'input-label' }, 'Желаемый курс (₽ за 1КК)'),
                    React.createElement('input', {
                        key: 'input',
                        type: 'number',
                        step: '0.01',
                        className: 'input-field',
                        placeholder: 'Введите курс',
                        value: state.desiredRate,
                        onChange: e => setAppState({ desiredRate: e.target.value })
                    })
                ]),
                type === 'sell' ? React.createElement('div', { key: 'phone' }, [
                    React.createElement('div', { key: 'phone-group', className: 'input-group' }, [
                        React.createElement('label', { key: 'label', className: 'input-label' }, 'Номер телефона'),
                        React.createElement('input', {
                            key: 'input',
                            type: 'tel',
                            className: 'input-field',
                            placeholder: 'Введите номер телефона',
                            value: state.phoneNumber,
                            onChange: e => setAppState({ phoneNumber: e.target.value })
                        })
                    ]),
                    React.createElement('div', { key: 'bank-group', className: 'input-group' }, [
                        React.createElement('label', { key: 'label', className: 'input-label' }, 'Банк для перевода'),
                        React.createElement('select', {
                            key: 'select',
                            className: 'input-field',
                            value: state.selectedBank,
                            onChange: e => setAppState({ selectedBank: e.target.value })
                        }, [
                            React.createElement('option', { key: 'default', value: '' }, 'Выберите банк'),
                            ...banks.map(bank => React.createElement('option', { key: bank, value: bank }, bank))
                        ])
                    ])
                ]) : null,
                state.coinAmount && state.desiredRate ? React.createElement('div', { key: 'calc' }, [
                    React.createElement('div', { key: 'rate-display', className: 'conversion-rate' }, 
                        `1КК CAZIS = ${state.desiredRate} ₽`
                    ),
                    React.createElement('div', { key: 'result', className: 'calculation-result' }, [
                        React.createElement('div', { key: 'line1', className: 'calculation-line' }, [
                            React.createElement('span', { key: 'label' }, 'Сумма:'),
                            React.createElement('span', { key: 'value' }, `${calculateRubles()} ₽`)
                        ]),
                        type === 'sell' ? React.createElement('div', { key: 'line2', className: 'calculation-line' }, [
                            React.createElement('span', { key: 'label' }, 'Комиссия (5%):'),
                            React.createElement('span', { key: 'value' }, `- ${(calculateRubles() * 0.05).toFixed(2)} ₽`)
                        ]) : null,
                        React.createElement('div', { key: 'total', className: 'calculation-total' }, [
                            React.createElement('span', { key: 'label' }, type === 'buy' ? 'К оплате:' : 'К получению:'),
                            React.createElement('span', { key: 'value' }, `${type === 'buy' ? calculateRubles() : calculateWithFee()} ₽`)
                        ])
                    ])
                ]) : null,
                React.createElement('button', {
                    key: 'action',
                    className: 'action-button',
                    onClick: handleTransaction,
                    disabled: !state.coinAmount || !state.desiredRate || (type === 'sell' && (!state.phoneNumber || !state.selectedBank))
                }, type === 'buy' ? 'Купить' : 'Продать')
            ]));
        }

        // Рендер раздела баланса
        function renderBalanceSection() {
            return React.createElement('div', { className: 'balance-section fade-in' }, [
                React.createElement('div', { key: 'card', className: 'user-card' }, [
                    React.createElement('div', { key: 'id', className: 'user-id' }, 'ID: 123456789'),
                    React.createElement('h2', { key: 'title' }, 'Ваш баланс'),
                    React.createElement('div', { key: 'amount', className: 'balance-amount' }, '15,000 💎'),
                    React.createElement('div', { key: 'actions', className: 'action-buttons' }, [
                        React.createElement('button', { key: 'deposit', className: 'secondary-button' }, 'Ввод'),
                        React.createElement('button', { key: 'withdraw', className: 'secondary-button' }, 'Вывод')
                    ])
                ]),
                React.createElement('h2', { 
                    key: 'title', 
                    style: { marginBottom: '16px' } 
                }, 'История транзакций'),
                ...[1, 2, 3, 4, 5].map(i => 
                    React.createElement('div', { 
                        key: `transaction-${i}`,
                        className: 'transaction-item slide-up', 
                        style: { animationDelay: `${i * 0.05}s` }
                    }, [
                        React.createElement('div', { key: 'avatar', className: 'avatar' }, i % 2 === 0 ? 'П' : 'К'),
                        React.createElement('div', { key: 'details', className: 'transaction-details' }, [
                            React.createElement('div', { key: 'amount', className: 'transaction-amount' }, 
                                `${Math.floor(100 + Math.random() * 900)} CAZIS`
                            ),
                            React.createElement('div', { key: 'rate', className: 'transaction-rate' }, 
                                new Date(Date.now() - i * 86400000).toLocaleDateString()
                            )
                        ]),
                        React.createElement('div', { 
                            key: 'value',
                            style: { color: i % 2 === 0 ? 'var(--success-color)' : 'var(--error-color)' }
                        }, `${i % 2 === 0 ? '+' : '-'} ${Math.floor(100 + Math.random() * 900)} ₽`)
                    ])
                )
            ]);
        }

        // Рендер раздела инвестиций
        function renderInvestmentSection() {
            return React.createElement('div', { className: 'balance-section fade-in' }, [
                React.createElement('div', { key: 'card', className: 'investment-card' }, [
                    React.createElement('div', { key: 'header', className: 'investment-header' }, [
                        React.createElement('div', { key: 'icon', className: 'investment-icon' }, 
                            React.createElement('span', { className: 'material-icons' }, 'trending_up')
                        ),
                        React.createElement('div', { key: 'info' }, [
                            React.createElement('div', { key: 'title', className: 'investment-title' }, 'CAZIS Инвестиции'),
                            React.createElement('div', { key: 'rate', className: 'investment-rate' }, '+2% в сутки')
                        ])
                    ]),
                    React.createElement('p', { key: 'desc' }, 
                        'Инвестируйте свои CAZIS монеты и получайте стабильный доход каждый день. Возможность вывода в любой момент.'
                    ),
                    React.createElement('div', { key: 'stats', className: 'investment-stats' }, [
                        React.createElement('div', { key: 'invested', className: 'stat-item' }, [
                            React.createElement('div', { key: 'value', className: 'stat-value' }, '5,000 💎'),
                            React.createElement('div', { key: 'label', className: 'stat-label' }, 'Инвестировано')
                        ]),
                        React.createElement('div', { key: 'income', className: 'stat-item' }, [
                            React.createElement('div', { key: 'value', className: 'stat-value' }, '150 💎'),
                            React.createElement('div', { key: 'label', className: 'stat-label' }, 'Доход')
                        ]),
                        React.createElement('div', { key: 'term', className: 'stat-item' }, [
                            React.createElement('div', { key: 'value', className: 'stat-value' }, '30 дней'),
                            React.createElement('div', { key: 'label', className: 'stat-label' }, 'Срок')
                        ])
                    ])
                ]),
                React.createElement('button', { key: 'button', className: 'action-button' }, 'Инвестировать'),
                React.createElement('h2', { 
                    key: 'title', 
                    style: { margin: '20px 0 16px 0' } 
                }, 'История начислений'),
                ...[1, 2, 3, 4, 5].map(i => 
                    React.createElement('div', { 
                        key: `income-${i}`,
                        className: 'transaction-item slide-up', 
                        style: { animationDelay: `${i * 0.05}s` }
                    }, [
                        React.createElement('div', { key: 'avatar', className: 'avatar' }, '+'),
                        React.createElement('div', { key: 'details', className: 'transaction-details' }, [
                            React.createElement('div', { key: 'amount', className: 'transaction-amount' }, 'Начисление дохода'),
                            React.createElement('div', { key: 'rate', className: 'transaction-rate' }, 
                                new Date(Date.now() - i * 86400000).toLocaleDateString()
                            )
                        ]),
                        React.createElement('div', { 
                            key: 'value',
                            style: { color: 'var(--success-color)' }
                        }, `+ ${Math.floor(10 + Math.random() * 40)} 💎`)
                    ])
                )
            ]);
        }

        // Рендер главного раздела
        function renderMainSection() {
            const state = window.appState;
            
            return React.createElement('div', { className: 'fade-in' }, [
                React.createElement('div', { key: 'header', className: 'header' }, [
                    React.createElement('h1', { key: 'title' }, 'CAZIS P2P'),
                    React.createElement('div', { key: 'banner', className: 'price-banner' }, [
                        React.createElement('h3', { key: 'text' }, state.activeTab === 'buy' ? 'Покупают за' : 'Продают за'),
                        React.createElement('div', { key: 'value', className: 'price-value' }, 
                            `${state.activeTab === 'buy' ? state.buyRate : state.sellRate} ₽ за 1КК`
                        )
                    ])
                ]),
                React.createElement('div', { key: 'content', className: 'transaction-list' }, [
                    React.createElement('div', { key: 'tabs', className: 'transaction-tabs' }, [
                        React.createElement('button', {
                            key: 'buy',
                            className: `tab-button ${state.activeTab === 'buy' ? 'active' : ''}`,
                            onClick: () => setAppState({ activeTab: 'buy' })
                        }, 'Купить'),
                        React.createElement('button', {
                            key: 'sell',
                            className: `tab-button ${state.activeTab === 'sell' ? 'active' : ''}`,
                            onClick: () => setAppState({ activeTab: 'sell' })
                        }, 'Продать')
                    ]),
                    React.createElement('h2', { 
                        key: 'title',
                        style: { marginBottom: '16px' } 
                    }, 'Доступные сделки'),
                    ...[1, 2, 3, 4, 5].map(i => 
                        React.createElement('div', { 
                            key: `deal-${i}`,
                            className: 'transaction-item slide-up', 
                            style: { animationDelay: `${i * 0.05}s` }
                        }, [
                            React.createElement('div', { key: 'avatar', className: 'avatar' }, 'А'),
                            React.createElement('div', { key: 'details', className: 'transaction-details' }, [
                                React.createElement('div', { key: 'amount', className: 'transaction-amount' }, 
                                    `${Math.floor(1000 + Math.random() * 9000)} CAZIS`
                                ),
                                React.createElement('div', { key: 'rate', className: 'transaction-rate' }, 
                                    `${state.activeTab === 'buy' ? state.buyRate : state.sellRate} ₽ за 1КК`
                                )
                            ]),
                            React.createElement('div', { key: 'action', className: 'transaction-action' }, 
                                React.createElement('button', {
                                    className: 'secondary-button',
                                    onClick: () => openModal(state.activeTab)
                                }, state.activeTab === 'buy' ? 'Купить' : 'Продать')
                            )
                        ])
                    )
                ]),
                state.buyModalOpen ? React.createElement(TransactionModal, {
                    key: 'buy-modal',
                    type: 'buy',
                    onClose: closeModal
                }) : null,
                state.sellModalOpen ? React.createElement(TransactionModal, {
                    key: 'sell-modal',
                    type: 'sell',
                    onClose: closeModal
                }) : null
            ]);
        }

        // Рендер нижнего меню
        function renderBottomNav() {
            const state = window.appState;
            
            return React.createElement('div', { key: 'nav', className: 'bottom-nav' }, [
                React.createElement('a', {
                    key: 'main',
                    className: `nav-item ${state.activeSection === 'main' ? 'active' : ''}`,
                    onClick: () => setAppState({ activeSection: 'main' })
                }, [
                    React.createElement('span', { key: 'icon', className: 'material-icons nav-icon' }, 'home'),
                    React.createElement('span', { key: 'text' }, 'Главная')
                ]),
                React.createElement('a', {
                    key: 'balance',
                    className: `nav-item ${state.activeSection === 'balance' ? 'active' : ''}`,
                    onClick: () => setAppState({ activeSection: 'balance' })
                }, [
                    React.createElement('span', { key: 'icon', className: 'material-icons nav-icon' }, 'account_balance_wallet'),
                    React.createElement('span', { key: 'text' }, 'Баланс')
                ]),
                React.createElement('a', {
                    key: 'investment',
                    className: `nav-item ${state.activeSection === 'investment' ? 'active' : ''}`,
                    onClick: () => setAppState({ activeSection: 'investment' })
                }, [
                    React.createElement('span', { key: 'icon', className: 'material-icons nav-icon' }, 'savings'),
                    React.createElement('span', { key: 'text' }, 'Инвестиции')
                ])
            ]);
        }

        // Рендер оверлея загрузки
        function renderLoadingOverlay() {
            if (!window.appState.isLoading) return null;
            
            return React.createElement('div', { key: 'loading', className: 'loading-overlay active' }, [
                React.createElement('div', { key: 'spinner', className: 'loading-spinner' }),
                React.createElement('div', { key: 'text', className: 'loading-text' }, 'Поиск подходящей сделки...')
            ]);
        }

        // Основная функция рендеринга приложения
        function renderApp() {
            const state = window.appState;
            let content;
            
            switch (state.activeSection) {
                case 'balance':
                    content = renderBalanceSection();
                    break;
                case 'investment':
                    content = renderInvestmentSection();
                    break;
                default:
                    content = renderMainSection();
            }
            
            const app = React.createElement('div', { className: 'app-container' }, [
                content,
                renderBottomNav(),
                renderLoadingOverlay()
            ]);
            
            ReactDOM.render(app, document.getElementById('root'));
        }

        // Инициализация приложения
        function initApp() {
            try {
                // Запускаем обновление курсов
                startRatesUpdate();
                
                // Первоначальный рендеринг
                renderApp();
                
                console.log('Приложение успешно инициализировано');
            } catch (error) {
                console.error('Ошибка инициализации приложения:', error);
                
                // Показываем сообщение об ошибке пользователю
                document.getElementById('root').innerHTML = `
                    <div style="padding: 20px; text-align: center;">
                        <h2>Произошла ошибка при загрузке приложения</h2>
                        <p>Пожалуйста, попробуйте перезагрузить страницу</p>
                        <button onclick="window.location.reload()" style="
                            padding: 10px 20px;
                            background: var(--primary-color);
                            color: white;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            margin-top: 20px;
                        ">Перезагрузить</button>
                    </div>
                `;
            }
        }

        // Запускаем приложение после загрузки страницы
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
</body>
</html>
