<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EarnApp - заработок в Telegram</title>
    
    <!-- Подключение шрифтов -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Иконки Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Современные переменные дизайна */
        :root {
            --primary: #2e86de;
            --primary-gradient: linear-gradient(135deg, #2e86de, #54a0ff);
            --secondary: #10ac84;
            --success: #10ac84;
            --danger: #ee5253;
            --warning: #ff9f43;
            --info: #0abde3;
            --premium: #f39c12;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: #ffffff;
            --bg-modal: #ffffff;
            
            --text-primary: #2d3436;
            --text-secondary: #636e72;
            --text-muted: #b2bec3;
            
            --border-color: #dfe6e9;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.15);
            
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 24px;
            
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --transition-fast: all 0.2s ease;
            
            --bottom-nav-height: 80px;
        }

        [data-theme="dark"] {
            --primary: #341f97;
            --primary-gradient: linear-gradient(135deg, #341f97, #5f27cd);
            
            --bg-primary: #1a1c28;
            --bg-secondary: #242635;
            --bg-card: #242635;
            --bg-modal: #2a2d3f;
            
            --text-primary: #f5f6fa;
            --text-secondary: #dcdde1;
            --text-muted: #7f8fa4;
            
            --border-color: #353b48;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Manrope', 'Segoe UI', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
            padding-bottom: var(--bottom-nav-height);
            overflow-x: hidden;
        }

        /* Контейнеры и сетка */
        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 0 16px;
        }

        .page {
            padding: 20px 0 30px;
            animation: fadeIn 0.4s ease;
        }

        /* Заголовки */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            margin-bottom: 16px;
        }

        h1 {
            font-size: 1.75rem;
            text-align: center;
            margin: 20px 0;
        }

        /* Карточки */
        .card {
            background-color: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .card:active {
            transform: scale(0.98);
        }

        /* Навигация */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            background-color: var(--bg-card);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--text-muted);
            font-size: 0.7rem;
            width: 70px;
            height: 60px;
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
        }

        .nav-item.active {
            color: var(--primary);
            background-color: rgba(46, 134, 222, 0.1);
            transform: translateY(-5px);
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 5px;
            transition: var(--transition-fast);
        }

        .nav-item.active i {
            transform: scale(1.1);
        }

        /* Кнопки */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 14px 24px;
            border-radius: 14px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Manrope', sans-serif;
            text-decoration: none;
        }

        .btn:active {
            transform: scale(0.96);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 12px rgba(46, 134, 222, 0.25);
        }

        .btn-secondary {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-premium {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            box-shadow: 0 4px 12px rgba(243, 156, 18, 0.25);
        }

        .btn-block {
            width: 100%;
        }

        /* Формы */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .form-control {
            width: 100%;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Manrope', sans-serif;
            transition: var(--transition-fast);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 134, 222, 0.2);
        }

        /* Модальные окна */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: var(--bg-modal);
            border-radius: var(--radius-lg);
            padding: 24px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h2 {
            margin-bottom: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 5px;
        }

        /* Боттом-шиты (всплывающие снизу окна) */
        .bottom-sheet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .bottom-sheet {
            background-color: var(--bg-modal);
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            padding: 24px;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            animation: slideUpBottom 0.3s ease;
        }

        /* Транзакции */
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-info {
            display: flex;
            align-items: center;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-amount {
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* Задания */
        .task-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .task-details {
            flex: 1;
        }
        
        .task-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .task-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .task-reward {
            font-weight: 700;
            color: var(--success);
        }

        /* Настройки */
        .settings-section {
            margin-bottom: 30px;
        }
        
        .settings-section h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: var(--radius-md);
            background-color: var(--bg-secondary);
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition-fast);
        }
        
        .settings-item:active {
            background-color: var(--bg-card);
        }
        
        .settings-item-content {
            display: flex;
            align-items: center;
        }
        
        .settings-item-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background-color: rgba(46, 134, 222, 0.1);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
        }
        
        .settings-item-icon i {
            font-size: 1.2rem;
        }
        
        .theme-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .theme-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--text-muted);
            transition: .4s;
            border-radius: 24px;
        }
        
        .theme-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .theme-slider {
            background: var(--primary-gradient);
        }
        
        input:checked + .theme-slider:before {
            transform: translateX(26px);
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideUpBottom {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        /* Состояния */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 3.5rem;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .empty-state p {
            margin-bottom: 24px;
            font-size: 1.1rem;
        }

        /* Кастомные алерты */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background-color: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            animation: slideInRight 0.3s ease;
            max-width: 350px;
            border-left: 4px solid var(--primary);
        }

        .toast.success {
            border-left-color: var(--success);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast-icon {
            margin-right: 12px;
            font-size: 1.2rem;
        }

        .toast-content {
            flex: 1;
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* Адаптивность */
        @media (min-width: 768px) {
            .container {
                padding: 0 20px;
            }
        }

        /* Утилиты */
        .text-success {
            color: var(--success);
        }

        .text-danger {
            color: var(--danger);
        }

        .text-muted {
            color: var(--text-muted);
        }

        .text-premium {
            color: var(--premium);
        }

        .mb-3 {
            margin-bottom: 1rem;
        }

        .mt-3 {
            margin-top: 1rem;
        }

        .text-center {
            text-align: center;
        }

        .d-flex {
            display: flex;
        }

        .justify-content-between {
            justify-content: space-between;
        }

        .align-items-center {
            align-items: center;
        }
        
        .hidden {
            display: none;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }
        
        .back-button i {
            margin-right: 8px;
        }
        
        .loading-button {
            position: relative;
        }
        
        .loading-button .spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-button .btn-text {
            opacity: 1;
        }
        
        .loading-button.loading .btn-text {
            opacity: 0;
        }
        
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* Баланс в профиле */
        .balance-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .balance-amount {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -1px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .balance-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }
        
        .profile-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .profile-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 8px;
            background-color: var(--bg-secondary);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .profile-action-btn:active {
            transform: scale(0.95);
            background-color: var(--bg-card);
        }
        
        .profile-action-btn i {
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        .profile-action-btn span {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .withdraw-limits {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        /* Вкладки */
        .tabs {
            display: flex;
            background-color: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 4px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            font-weight: 600;
        }
        
        .tab.active {
            background-color: var(--bg-card);
            box-shadow: var(--shadow-sm);
            color: var(--primary);
        }

        /* История операций */
        .transaction-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .transaction-category {
            font-weight: 600;
            margin: 15px 0 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .transaction-date {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 3px;
        }
        
        /* Задания */
        .task-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .task-card {
            background-color: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 15px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }
        
        .task-card:active {
            transform: scale(0.98);
        }
        
        .task-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .task-icon-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        /* Премиум */
        .premium-badge {
            display: inline-block;
            padding: 4px 8px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .income-stats {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px;
            background-color: var(--bg-secondary);
            border-radius: var(--radius-md);
        }
        
        .income-item {
            text-align: center;
        }
        
        .income-value {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .income-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .premium-option {
            border: 2px solid var(--premium);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 15px;
            background-color: rgba(243, 156, 18, 0.05);
        }
        
        .premium-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .premium-price {
            font-weight: 700;
            color: var(--premium);
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <div id="toast-container" class="toast-container"></div>

    <!-- Подключаем Vue 3 и Vue Router через CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
    
    <script type="module">
    // Инициализация приложения
    const { createApp, ref, computed, reactive, onMounted, watch, onUnmounted } = Vue;
    const { createRouter, createWebHashHistory } = VueRouter;

    // Система уведомлений (тосты)
    function showToast(message, type = 'info', duration = 3000) {
        const toastContainer = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        const iconClass = {
            success: 'fa-check-circle',
            error: 'fa-exclamation-circle',
            warning: 'fa-exclamation-triangle',
            info: 'fa-info-circle'
        }[type];
        
        toast.innerHTML = `
            <div class="toast-icon">
                <i class="fas ${iconClass}"></i>
            </div>
            <div class="toast-content">${message}</div>
            <button class="toast-close" onclick="this.parentElement.remove()">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        toastContainer.appendChild(toast);
        
        if (duration > 0) {
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => toast.remove(), 300);
                }
            }, duration);
        }
        
        return toast;
    }

    // Главный компонент приложения
    const App = {
        template: `
            <div class="container">
                <router-view></router-view>
            </div>
            <nav class="bottom-nav">
                <router-link to="/earn" class="nav-item" :class="{ active: $route.path === '/earn' }">
                    <i class="fas fa-coins"></i>
                    <span>Заработок</span>
                </router-link>
                <router-link to="/profile" class="nav-item" :class="{ active: $route.path === '/profile' }">
                    <i class="fas fa-user"></i>
                    <span>Профиль</span>
                </router-link>
                <router-link to="/settings" class="nav-item" :class="{ active: $route.path === '/settings' }">
                    <i class="fas fa-cog"></i>
                    <span>Настройки</span>
                </router-link>
            </nav>
        `,
        setup() {
            // Состояние темы
            const theme = ref(localStorage.getItem('theme') || 'light');
            
            // Применение темы
            const applyTheme = () => {
                document.documentElement.setAttribute('data-theme', theme.value);
                localStorage.setItem('theme', theme.value);
            };
            
            // Инициализация данных пользователя
            onMounted(() => {
                applyTheme();
                
                if (!localStorage.getItem('userBalance')) {
                    localStorage.setItem('userBalance', '0');
                }
                
                if (!localStorage.getItem('userPhone')) {
                    localStorage.setItem('userPhone', '');
                }
                
                if (!localStorage.getItem('userBank')) {
                    localStorage.setItem('userBank', '');
                }
                
                if (!localStorage.getItem('completedTasks')) {
                    localStorage.setItem('completedTasks', JSON.stringify([]));
                }
                
                if (!localStorage.getItem('withdrawHistory')) {
                    localStorage.setItem('withdrawHistory', JSON.stringify([]));
                }
                
                if (!localStorage.getItem('incomeHours')) {
                    localStorage.setItem('incomeHours', '0');
                }
                
                if (!localStorage.getItem('premiumActive')) {
                    localStorage.setItem('premiumActive', 'false');
                }
                
                if (!localStorage.getItem('premiumUntil')) {
                    localStorage.setItem('premiumUntil', '0');
                }
                
                if (!localStorage.getItem('premiumIncome')) {
                    localStorage.setItem('premiumIncome', '0');
                }
                
                // Запуск автоматического начисления дохода
                setInterval(() => {
                    calculateIncome();
                }, 60000); // Каждую минуту
            });
            
            // Функция автоматического начисления дохода
            const calculateIncome = () => {
                const incomeHours = parseFloat(localStorage.getItem('incomeHours') || '0');
                const premiumActive = localStorage.getItem('premiumActive') === 'true';
                const premiumIncome = parseFloat(localStorage.getItem('premiumIncome') || '0');
                
                if (incomeHours > 0) {
                    let hourlyRate = 0.1; // Обычная ставка
                    
                    if (premiumActive) {
                        hourlyRate = premiumIncome;
                    }
                    
                    // Начисляем доход пропорционально времени (за минуту)
                    const minuteIncome = (hourlyRate / 60);
                    const currentBalance = parseFloat(localStorage.getItem('userBalance') || '0');
                    const newBalance = currentBalance + minuteIncome;
                    
                    localStorage.setItem('userBalance', newBalance.toFixed(2));
                    
                    // Добавляем транзакцию каждый час
                    const now = new Date();
                    if (now.getMinutes() === 0) {
                        const transactions = JSON.parse(localStorage.getItem('userTransactions') || '[]');
                        transactions.unshift({
                            id: Date.now(),
                            type: 'income',
                            amount: parseFloat(hourlyRate.toFixed(2)),
                            date: now.toISOString(),
                            description: `Пассивный доход за час`
                        });
                        localStorage.setItem('userTransactions', JSON.stringify(transactions));
                    }
                }
            };
            
            return {
                theme
            };
        }
    };

    // Компонент заработка
    const Earn = {
        template: `
            <div class="page">
                <h1>Заработок</h1>
                
                <div class="tabs">
                    <div class="tab" :class="{ active: activeTab === 'tasks' }" @click="activeTab = 'tasks'">Задания</div>
                    <div class="tab" :class="{ active: activeTab === 'completed' }" @click="activeTab = 'completed'">Выполненные</div>
                </div>
                
                <div class="tab-content" :class="{ active: activeTab === 'tasks' }">
                    <div class="task-grid">
                        <div v-for="task in availableTasks" :key="task.id" class="task-card">
                            <div class="task-header">
                                <div class="task-icon-small">
                                    <i :class="task.icon"></i>
                                </div>
                                <div class="task-content">
                                    <div class="task-title">{{ task.title }}</div>
                                    <div class="task-description">{{ task.description }}</div>
                                </div>
                            </div>
                            <div class="task-footer">
                                <div class="task-reward">+{{ task.reward }} часов дохода</div>
                                <button class="btn btn-primary" @click="showTaskModal(task)">
                                    {{ task.completed ? 'Выполнено' : 'Выполнить' }}
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div v-if="availableTasks.length === 0" class="empty-state">
                        <i class="fab fa-telegram"></i>
                        <p>Нет доступных заданий</p>
                    </div>
                </div>
                
                <div class="tab-content" :class="{ active: activeTab === 'completed' }">
                    <div class="task-grid">
                        <div v-for="task in completedTasks" :key="task.id" class="task-card">
                            <div class="task-header">
                                <div class="task-icon-small">
                                    <i :class="task.icon"></i>
                                </div>
                                <div class="task-content">
                                    <div class="task-title">{{ task.title }}</div>
                                    <div class="task-description">{{ task.description }}</div>
                                </div>
                            </div>
                            <div class="task-footer">
                                <div class="task-reward">+{{ task.reward }} часов дохода</div>
                                <span class="text-success">Выполнено</span>
                            </div>
                        </div>
                    </div>
                    
                    <div v-if="completedTasks.length === 0" class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <p>Вы еще не выполнили ни одного задания</p>
                    </div>
                </div>
                
                <!-- Модальное окно задания -->
                <div class="bottom-sheet-overlay" v-if="showTask" @click.self="hideTaskModal">
                    <div class="bottom-sheet">
                        <div class="modal-header">
                            <h2>{{ currentTask.title }}</h2>
                            <button class="close-btn" @click="hideTaskModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <p>{{ currentTask.description }}</p>
                        
                        <div class="form-group">
                            <label>Ссылка на канал</label>
                            <input type="text" class="form-control" :value="currentTask.link" readonly>
                        </div>
                        
                        <button class="btn btn-primary btn-block" @click="openTaskLink" v-if="!currentTask.completed">
                            Подписаться
                        </button>
                        
                        <button class="btn btn-success btn-block" @click="claimTaskReward" v-else>
                            Получить {{ currentTask.reward }} часов дохода
                        </button>
                    </div>
                </div>
            </div>
        `,
        setup() {
            const activeTab = ref('tasks');
            
            // Данные для заданий
            const availableTasks = ref([
                { 
                    id: 1, 
                    title: 'Подписка на Telegram канал', 
                    description: 'Подпишитесь на наш основной канал', 
                    reward: 5,
                    link: 'https://t.me/example_channel',
                    icon: 'fab fa-telegram',
                    completed: false
                },
                { 
                    id: 2, 
                    title: 'Подписка на новостной канал', 
                    description: 'Подпишитесь на наш новостной канал', 
                    reward: 3,
                    link: 'https://t.me/example_news',
                    icon: 'fab fa-telegram',
                    completed: false
                },
                { 
                    id: 3, 
                    title: 'Подписка на игровой канал', 
                    description: 'Подпишитесь на наш игровой канал', 
                    reward: 4,
                    link: 'https://t.me/example_games',
                    icon: 'fab fa-telegram',
                    completed: false
                }
            ]);
            
            const completedTasks = ref([]);
            
            const showTask = ref(false);
            const currentTask = ref({});
            
            // Загрузка данных
            onMounted(() => {
                loadCompletedTasks();
            });
            
            // Загрузка выполненных заданий
            const loadCompletedTasks = () => {
                const completedTaskIds = JSON.parse(localStorage.getItem('completedTasks') || '[]');
                const allTasks = [...availableTasks.value];
                
                availableTasks.value = allTasks.filter(task => !completedTaskIds.includes(task.id));
                completedTasks.value = allTasks.filter(task => completedTaskIds.includes(task.id));
                
                // Помечаем выполненные задания
                availableTasks.value.forEach(task => {
                    task.completed = completedTaskIds.includes(task.id);
                });
                
                completedTasks.value.forEach(task => {
                    task.completed = true;
                });
            };
            
            // Показать модальное окно задания
            const showTaskModal = (task) => {
                currentTask.value = task;
                showTask.value = true;
            };
            
            // Скрыть модальное окно задания
            const hideTaskModal = () => {
                showTask.value = false;
            };
            
            // Открыть ссылку задания
            const openTaskLink = () => {
                window.open(currentTask.value.link, '_blank');
                // Помечаем задание как выполненное
                currentTask.value.completed = true;
                availableTasks.value.find(t => t.id === currentTask.value.id).completed = true;
            };
            
            // Получить награду за задание
            const claimTaskReward = () => {
                // Добавляем задание в выполненные
                const completedTasks = JSON.parse(localStorage.getItem('completedTasks') || '[]');
                if (!completedTasks.includes(currentTask.value.id)) {
                    completedTasks.push(currentTask.value.id);
                    localStorage.setItem('completedTasks', JSON.stringify(completedTasks));
                }
                
                // Начисляем часы дохода
                const currentHours = parseFloat(localStorage.getItem('incomeHours') || '0');
                const newHours = currentHours + currentTask.value.reward;
                localStorage.setItem('incomeHours', newHours.toString());
                
                // Добавляем транзакцию
                const transactions = JSON.parse(localStorage.getItem('userTransactions') || '[]');
                transactions.unshift({
                    id: Date.now(),
                    type: 'task',
                    amount: currentTask.value.reward,
                    date: new Date().toISOString(),
                    description: `Часы дохода за задание: ${currentTask.value.title}`
                });
                localStorage.setItem('userTransactions', JSON.stringify(transactions));
                
                showTask.value = false;
                showToast(`Получено ${currentTask.value.reward} часов дохода за выполнение задания!`, 'success');
                
                // Обновляем списки заданий
                loadCompletedTasks();
            };
            
            return {
                activeTab,
                availableTasks,
                completedTasks,
                showTask,
                currentTask,
                showTaskModal,
                hideTaskModal,
                openTaskLink,
                claimTaskReward
            };
        }
    };

    // Компонент профиля
    const Profile = {
        template: `
            <div class="page">
                <h1>Профиль</h1>
                
                <div class="balance-container">
                    <div class="balance-amount">{{ formatBalance(userBalance) }} ₽</div>
                    <div class="balance-label">Ваш баланс</div>
                </div>
                
                <div class="income-stats">
                    <div class="income-item">
                        <div class="income-value">{{ incomeHours }} ч</div>
                        <div class="income-label">Часов дохода</div>
                    </div>
                    <div class="income-item">
                        <div class="income-value">{{ formatBalance(hourlyRate) }} ₽/ч</div>
                        <div class="income-label">Ставка</div>
                    </div>
                    <div class="income-item">
                        <div class="income-value">{{ formatBalance(dailyIncome) }} ₽</div>
                        <div class="income-label">Дневной доход</div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <div class="profile-action-btn" @click="showWithdrawModal">
                        <i class="fas fa-wallet"></i>
                        <span>Вывод</span>
                    </div>
                    <div class="profile-action-btn" @click="showPremiumModal">
                        <i class="fas fa-crown"></i>
                        <span>PREMIUM</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Заявки на вывод</h3>
                    
                    <div v-if="withdrawHistory.length === 0" class="empty-state">
                        <i class="fas fa-receipt"></i>
                        <p>Нет заявок на вывод</p>
                    </div>
                    
                    <div v-else class="transaction-list">
                        <div v-for="transaction in withdrawHistory" :key="transaction.id" class="transaction-item">
                            <div class="transaction-info">
                                <div class="transaction-icon text-danger">
                                    <i class="fas fa-wallet"></i>
                                </div>
                                <div class="transaction-details">
                                    <div>{{ transaction.description }}</div>
                                    <div class="transaction-date">{{ formatDate(transaction.date) }}</div>
                                </div>
                            </div>
                            <div class="transaction-amount text-danger">
                                -{{ transaction.amount }} ₽
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Модальное окно вывода средств -->
                <div class="bottom-sheet-overlay" v-if="showWithdraw" @click.self="hideWithdrawModal">
                    <div class="bottom-sheet">
                        <div class="modal-header">
                            <h2>Вывод средств</h2>
                            <button class="close-btn" @click="hideWithdrawModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div v-if="!userPhone || !userBank">
                            <p>Для вывода средств необходимо указать номер телефона и банковские реквизиты в настройках.</p>
                            <button class="btn btn-primary btn-block mt-3" @click="goToSettings">
                                Перейти в настройки
                            </button>
                        </div>
                        
                        <div v-else>
                            <div class="form-group">
                                <label>Сумма вывода (₽)</label>
                                <input type="number" class="form-control" v-model="withdrawAmount" 
                                       :min="minWithdraw" :max="maxWithdraw" placeholder="Введите сумму">
                                <div class="withdraw-limits">
                                    Минимум: {{ minWithdraw }} ₽, Максимум: {{ maxWithdraw }} ₽
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Способ вывода</label>
                                <select class="form-control" v-model="withdrawMethod">
                                    <option value="bank">Банковская карта</option>
                                    <option value="qiwi">QIWI Кошелек</option>
                                    <option value="yoomoney">ЮMoney</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Реквизиты для вывода</label>
                                <input type="text" class="form-control" :value="withdrawDetails" readonly>
                            </div>
                            
                            <button class="btn btn-primary btn-block" 
                                    :disabled="!canWithdraw" 
                                    @click="requestWithdraw">
                                {{ withdrawButtonText }}
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Модальное окно PREMIUM -->
                <div class="bottom-sheet-overlay" v-if="showPremium" @click.self="hidePremiumModal">
                    <div class="bottom-sheet">
                        <div class="modal-header">
                            <h2>PREMIUM подписка</h2>
                            <button class="close-btn" @click="hidePremiumModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div v-if="premiumActive">
                            <p>Ваш PREMIUM статус активен до: <strong>{{ formatPremiumDate(premiumUntil) }}</strong></p>
                            <p>Текущая ставка: <strong>{{ formatBalance(premiumIncome) }} ₽/час</strong></p>
                        </div>
                        
                        <div v-else>
                            <p>Активируйте PREMIUM подписку для увеличения дохода!</p>
                            
                            <div class="form-group">
                                <label>Доход в час (₽)</label>
                                <input type="number" class="form-control" v-model="premiumIncomeValue" 
                                       min="0.5" max="10" step="0.5" placeholder="0.5 - 10">
                            </div>
                            
                            <div class="form-group">
                                <label>Срок действия (дней)</label>
                                <select class="form-control" v-model="premiumDays">
                                    <option value="7">7 дней</option>
                                    <option value="14">14 дней</option>
                                    <option value="30">30 дней</option>
                                </select>
                            </div>
                            
                            <div class="premium-option">
                                <div class="premium-header">
                                    <div>Стоимость</div>
                                    <div class="premium-price">{{ calculatePremiumCost() }} ₽</div>
                                </div>
                                <p>Доход: {{ premiumIncomeValue }} ₽/час в течение {{ premiumDays }} дней</p>
                            </div>
                            
                            <button class="btn btn-premium btn-block" 
                                    :disabled="!canActivatePremium" 
                                    @click="activatePremium">
                                Активировать PREMIUM
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `,
        setup() {
            const userBalance = ref(parseFloat(localStorage.getItem('userBalance') || '0'));
            const userPhone = ref(localStorage.getItem('userPhone') || '');
            const userBank = ref(localStorage.getItem('userBank') || '');
            const incomeHours = ref(parseFloat(localStorage.getItem('incomeHours') || '0'));
            const premiumActive = ref(localStorage.getItem('premiumActive') === 'true');
            const premiumUntil = ref(parseInt(localStorage.getItem('premiumUntil') || '0'));
            const premiumIncome = ref(parseFloat(localStorage.getItem('premiumIncome') || '0'));
            const withdrawHistory = ref(JSON.parse(localStorage.getItem('withdrawHistory') || '[]'));
            
            const showWithdraw = ref(false);
            const showPremium = ref(false);
            const withdrawAmount = ref('');
            const withdrawMethod = ref('bank');
            const minWithdraw = 50;
            const maxWithdraw = 15000;
            
            const premiumIncomeValue = ref('0.5');
            const premiumDays = ref('7');
            
            const hourlyRate = computed(() => {
                return premiumActive.value ? premiumIncome.value : 0.1;
            });
            
            const dailyIncome = computed(() => {
                return hourlyRate.value * 24;
            });
            
            const withdrawDetails = computed(() => {
                if (withdrawMethod.value === 'bank') return userBank.value;
                if (withdrawMethod.value === 'qiwi') return userPhone.value;
                return userPhone.value;
            });
            
            const canWithdraw = computed(() => {
                const amount = parseFloat(withdrawAmount.value || '0');
                return amount >= minWithdraw && amount <= maxWithdraw && amount <= userBalance.value;
            });
            
            const canActivatePremium = computed(() => {
                const cost = calculatePremiumCost();
                return cost > 0 && cost <= userBalance.value;
            });
            
            const withdrawButtonText = computed(() => {
                if (!withdrawAmount.value) return 'Введите сумму';
                if (parseFloat(withdrawAmount.value) > userBalance.value) return 'Недостаточно средств';
                if (parseFloat(withdrawAmount.value) < minWithdraw) return `Минимум ${minWithdraw} ₽`;
                if (parseFloat(withdrawAmount.value) > maxWithdraw) return `Максимум ${maxWithdraw} ₽`;
                return 'Заказать вывод';
            });
            
            const showWithdrawModal = () => {
                showWithdraw.value = true;
            };
            
            const hideWithdrawModal = () => {
                showWithdraw.value = false;
            };
            
            const showPremiumModal = () => {
                showPremium.value = true;
            };
            
            const hidePremiumModal = () => {
                showPremium.value = false;
            };
            
            const requestWithdraw = () => {
                const amount = parseFloat(withdrawAmount.value);
                
                if (amount < minWithdraw || amount > maxWithdraw) {
                    showToast(`Сумма должна быть от ${minWithdraw} до ${maxWithdraw} ₽`, 'error');
                    return;
                }
                
                if (amount > userBalance.value) {
                    showToast('Недостаточно средств на балансе', 'error');
                    return;
                }
                
                // Обновляем баланс
                const newBalance = userBalance.value - amount;
                userBalance.value = newBalance;
                localStorage.setItem('userBalance', newBalance.toString());
                
                // Добавляем транзакцию
                const newTransaction = {
                    id: Date.now(),
                    type: 'withdraw',
                    amount: amount,
                    date: new Date().toISOString(),
                    description: `Вывод средств (${withdrawMethod.value})`,
                    status: 'pending'
                };
                
                // Сохраняем историю выводов
                withdrawHistory.value.unshift(newTransaction);
                localStorage.setItem('withdrawHistory', JSON.stringify(withdrawHistory.value));
                
                showToast(`Запрос на вывод ${amount} ₽ отправлен`, 'success');
                hideWithdrawModal();
                withdrawAmount.value = '';
            };
            
            const calculatePremiumCost = () => {
                const income = parseFloat(premiumIncomeValue.value || '0');
                const days = parseInt(premiumDays.value || '0');
                
                if (income >= 0.5 && income <= 10 && days >= 7 && days <= 30) {
                    // Расчет стоимости: 0.5 руб/час = 100 руб за 7 дней
                    const baseCost = (income / 0.5) * 100 * (days / 7);
                    return Math.round(baseCost);
                }
                
                return 0;
            };
            
            const activatePremium = () => {
                const cost = calculatePremiumCost();
                
                if (cost > userBalance.value) {
                    showToast('Недостаточно средств для активации PREMIUM', 'error');
                    return;
                }
                
                // Обновляем баланс
                const newBalance = userBalance.value - cost;
                userBalance.value = newBalance;
                localStorage.setItem('userBalance', newBalance.toString());
                
                // Активируем PREMIUM
                const income = parseFloat(premiumIncomeValue.value);
                const days = parseInt(premiumDays.value);
                
                const now = new Date();
                const until = new Date(now.getTime() + (days * 24 * 60 * 60 * 1000));
                
                premiumActive.value = true;
                premiumUntil.value = until.getTime();
                premiumIncome.value = income;
                
                localStorage.setItem('premiumActive', 'true');
                localStorage.setItem('premiumUntil', until.getTime().toString());
                localStorage.setItem('premiumIncome', income.toString());
                
                // Добавляем транзакцию
                const transactions = JSON.parse(localStorage.getItem('userTransactions') || '[]');
                transactions.unshift({
                    id: Date.now(),
                    type: 'premium',
                    amount: -cost,
                    date: now.toISOString(),
                    description: `Активация PREMIUM на ${days} дней (${income} ₽/час)`
                });
                localStorage.setItem('userTransactions', JSON.stringify(transactions));
                
                showToast(`PREMIUM подписка активирована на ${days} дней!`, 'success');
                hidePremiumModal();
            };
            
            const goToSettings = () => {
                hideWithdrawModal();
                router.push('/settings');
            };
            
            const formatBalance = (balance) => {
                return parseFloat(balance).toFixed(2);
            };
            
            const formatDate = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU');
            };
            
            const formatPremiumDate = (timestamp) => {
                const date = new Date(timestamp);
                return date.toLocaleDateString('ru-RU');
            };
            
            return {
                userBalance,
                userPhone,
                userBank,
                incomeHours,
                premiumActive,
                premiumUntil,
                premiumIncome,
                withdrawHistory,
                showWithdraw,
                showPremium,
                withdrawAmount,
                withdrawMethod,
                minWithdraw,
                maxWithdraw,
                premiumIncomeValue,
                premiumDays,
                hourlyRate,
                dailyIncome,
                withdrawDetails,
                canWithdraw,
                canActivatePremium,
                withdrawButtonText,
                showWithdrawModal,
                hideWithdrawModal,
                showPremiumModal,
                hidePremiumModal,
                requestWithdraw,
                calculatePremiumCost,
                activatePremium,
                goToSettings,
                formatBalance,
                formatDate,
                formatPremiumDate
            };
        }
    };

    // Компонент настроек
    const Settings = {
        template: `
            <div class="page">
                <h1>Настройки</h1>
                
                <div class="settings-section">
                    <h3>Платежные реквизиты</h3>
                    
                    <div class="settings-item" @click="showPhoneModal">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>
                                <div>Номер телефона</div>
                                <div class="text-muted">{{ userPhone || 'Не указан' }}</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </div>
                    
                    <div class="settings-item" @click="showBankModal">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div>
                                <div>Банковская карта</div>
                                <div class="text-muted">{{ userBank || 'Не указана' }}</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Внешний вид</h3>
                    
                    <div class="settings-item">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div>Темная тема</div>
                        </div>
                        <label class="theme-switch">
                            <input type="checkbox" v-model="darkTheme" @change="toggleTheme">
                            <span class="theme-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>О приложении</h3>
                    
                    <div class="settings-item">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>Версия приложения</div>
                        </div>
                        <div class="text-muted">1.0.0</div>
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div>Политика конфиденциальности</div>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-content">
                            <div class="settings-item-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div>Пользовательское соглашение</div>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </div>
                </div>
                
                <!-- Модальное окно для номера телефона -->
                <div class="modal-overlay" v-if="showPhone" @click.self="hidePhoneModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Номер телефона</h2>
                            <button class="close-btn" @click="hidePhoneModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label>Введите номер телефона</label>
                            <input type="tel" class="form-control" v-model="phoneInput" 
                                   placeholder="+7 (900) 123-45-67">
                        </div>
                        
                        <button class="btn btn-primary btn-block" @click="savePhone">
                            Сохранить
                        </button>
                    </div>
                </div>
                
                <!-- Модальное окно для банковской карты -->
                <div class="modal-overlay" v-if="showBank" @click.self="hideBankModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Банковская карта</h2>
                            <button class="close-btn" @click="hideBankModal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label>Номер карты</label>
                            <input type="text" class="form-control" v-model="bankInput" 
                                   placeholder="0000 0000 0000 0000">
                        </div>
                        
                        <button class="btn btn-primary btn-block" @click="saveBank">
                            Сохранить
                        </button>
                    </div>
                </div>
            </div>
        `,
        setup() {
            const userPhone = ref(localStorage.getItem('userPhone') || '');
            const userBank = ref(localStorage.getItem('userBank') || '');
            const darkTheme = ref(localStorage.getItem('theme') === 'dark');
            
            const showPhone = ref(false);
            const showBank = ref(false);
            const phoneInput = ref(userPhone.value);
            const bankInput = ref(userBank.value);
            
            const toggleTheme = () => {
                const newTheme = darkTheme.value ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            };
            
            const showPhoneModal = () => {
                phoneInput.value = userPhone.value;
                showPhone.value = true;
            };
            
            const hidePhoneModal = () => {
                showPhone.value = false;
            };
            
            const savePhone = () => {
                userPhone.value = phoneInput.value;
                localStorage.setItem('userPhone', phoneInput.value);
                hidePhoneModal();
                showToast('Номер телефона сохранен', 'success');
            };
            
            const showBankModal = () => {
                bankInput.value = userBank.value;
                showBank.value = true;
            };
            
            const hideBankModal = () => {
                showBank.value = false;
            };
            
            const saveBank = () => {
                userBank.value = bankInput.value;
                localStorage.setItem('userBank', bankInput.value);
                hideBankModal();
                showToast('Банковская карта сохранена', 'success');
            };
            
            return {
                userPhone,
                userBank,
                darkTheme,
                showPhone,
                showBank,
                phoneInput,
                bankInput,
                toggleTheme,
                showPhoneModal,
                hidePhoneModal,
                savePhone,
                showBankModal,
                hideBankModal,
                saveBank
            };
        }
    };

    // Определение маршрутов
    const routes = [
        { path: '/', redirect: '/earn' },
        { path: '/earn', component: Earn },
        { path: '/profile', component: Profile },
        { path: '/settings', component: Settings }
    ];

    // Создание роутера
    const router = createRouter({
        history: createWebHashHistory(),
        routes
    });

    // Создание и монтирование приложения
    const app = createApp(App);
    app.use(router);
    app.mount('#app');

    // Глобальное добавление функции showToast
    window.showToast = showToast;
    </script>
</body>
</html>
